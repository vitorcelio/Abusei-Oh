<!DOCTYPE html>
<html lang="pt-br">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Abusei, Oh! - Produtos</title>
<link rel="shortcut icon" href="img/ico.png" type="image/x-icon">
<link rel="stylesheet" href="https://getbootstrap.com/docs/5.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
<link rel="stylesheet" href="/css/style.css">
</head>

<body>
	<!--Menu principal-->
	<header th:replace="~{base :: menu-principal}"></header>


	<main class="container-fluid">

		<section class="row">
			<!--formulário-->
			<div class="col-md-2 border-end  d-none d-sm-none d-md-block">
				<form th:action="@{/produtos/buscar}" class="mb-5">
					<div class="card-body d-flex justify-content-center">
						<div class="row">
							<div class="col-12">
								<h6 class="mt-3 text-azul-claro">Qual o nome do Produto?</h6>
								<input name="nome" type="text" class="form-control p-2 fonte-p mt-1" placeholder="Produto">
							</div>

							<div class="col-12">
								<h6 class="mt-3 text-azul-claro">Aonde você pretende encontrar?</h6>
								<select name="cidade" class="form-select p-2 fonte-p">
									<option selected value="">Sua localização</option>
									<optgroup th:each="estado : ${estados}" th:label="${estado.estado}">
										<option th:each="cidade : ${estado.cidades}" th:text="${cidade.cidade}" th:value="${cidade.cidade}"></option>
									</optgroup>
								</select>
							</div>

							<div class="col-12">
								<h6 class="mt-3 text-azul-claro">Categoria</h6>
								<select name="subcategoria" class="form-select p-2 fonte-p">
									<option selected value="">Escolha a categoria</option>
									<optgroup th:each="categoria : ${categorias}" th:label="${categoria.categoria}">
										<option th:each="subcategoria : ${categoria.subcategorias}" th:text="${subcategoria.subcategoria}" th:value="${subcategoria.subcategoria}"></option>
									</optgroup>
								</select>
							</div>


							<div class="col-12">
								<h6 class="mt-3 text-azul-claro">Quanto você pretende pagar?</h6>
								<div class="navbar">
									<input name="menorPreco" type="text" class="fonte-p col-5 col-md-5 input-form" placeholder="R$ mínimo" pattern="[0-9]+$">
									<h6 class="col-md-2 fw-normal text-center">—</h6>
									<input name="maiorPreco" type="text" class="fonte-p col-5 col-md-5 input-form" placeholder="R$ máximo" pattern="[0-9]+$">
								</div>
							</div>

							<div class="col-12 mt-3">
								<h6 class="text-azul-claro">Condição</h6>
								<select name="condicao" class="form-select p-2 fonte-p">
									<option selected value="">Escolha a condição</option>
									<option value="NOVO">Novo</option>
									<option value="SEMINOVO">Seminovo</option>
									<option value="USADO">Usado</option>
									<option value="NEGOCIAVEL">Negociável</option>
									<option value="TROCA">Troca</option>
								</select>
							</div>

							<button class="btn btn-primary bt-azul mt-3 p-2" type="submit">Pesquisar</button>
						</div>
					</div>
				</form>


			</div>
			<div class="col-md-2 d-md-none my-2">
				<div class="d-flex justify-content-between align-items-center text-azul">
					<h6>Filtre suas pesquisas</h6>
					<a class="btn p-2 bg-azul text-white" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample"> <i class="fs-4 bi bi-funnel"></i>
					</a>
				</div>
				<div class="offcanvas offcanvas-start" style="width: 260px !important;" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
					<div class="offcanvas-header">
						<h5 class="offcanvas-title" id="offcanvasExampleLabel">O que está procurando?</h5>
						<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
					</div>
					<div class="offcanvas-body">
						<form th:action="@{/produtos/buscar}" class="mb-5">
							<div class="card-body d-flex justify-content-center">
								<div class="row">
									<div class="col-12">
										<h6 class="mt-3 text-azul-claro">Qual o nome do Produto?</h6>
										<input name="nome" type="text" class="form-control p-2 fonte-p mt-1" placeholder="Produto">
									</div>

									<div class="col-12">
										<h6 class="mt-3 text-azul-claro">Aonde você pretende encontrar?</h6>
										<select name="cidade" class="form-select p-2 fonte-p">
											<option selected value="">Sua localização</option>
											<optgroup th:each="estado : ${estados}" th:label="${estado.estado}">
												<option th:each="cidade : ${estado.cidades}" th:text="${cidade.cidade}" th:value="${cidade.cidade}"></option>
											</optgroup>
										</select>
									</div>

									<div class="col-12">
										<h6 class="mt-3 text-azul-claro">Categoria</h6>
										<select name="subcategoria" class="form-select p-2 fonte-p">
											<option selected value="">Escolha a categoria</option>
											<optgroup th:each="categoria : ${categorias}" th:label="${categoria.categoria}">
												<option th:each="subcategoria : ${categoria.subcategorias}" th:text="${subcategoria.subcategoria}" th:value="${subcategoria.subcategoria}"></option>
											</optgroup>
										</select>
									</div>


									<div class="col-12">
										<h6 class="mt-3 text-azul-claro">Quanto você pretende pagar?</h6>
										<div class="navbar">
											<input name="menorPreco" type="text" class="fonte-p col-5 col-md-5 input-form" placeholder="R$ mínimo" pattern="[0-9]+$">
											<h6 class="col-md-2 fw-normal text-center">—</h6>
											<input name="maiorPreco" type="text" class="fonte-p col-5 col-md-5 input-form" placeholder="R$ máximo" pattern="[0-9]+$">
										</div>
									</div>

									<div class="col-12 mt-3">
										<h6 class="text-azul-claro">Condição</h6>
										<select name="condicao" class="form-select p-2 fonte-p">
											<option selected value="">Escolha a condição</option>
											<option value="NOVO">Novo</option>
											<option value="SEMINOVO">Seminovo</option>
											<option value="USADO">Usado</option>
											<option value="NEGOCIAVEL">Negociável</option>
											<option value="TROCA">Troca</option>
										</select>
									</div>

									<button class="btn btn-primary bt-azul mt-3 p-2" type="submit">Pesquisar</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="col-md-10">

				<div class="row">
					<div th:each="produto : ${produtos}" class="col-6 col-sm-4 col-md-2 mt-3">
						<a th:href="@{'/produtos/' + ${produto.link}}" class="text-decoration-none text-dark">
							<div class="card mb-3 border-0">
								<div th:if="${produto.imagem != null}" class="img-card bg-azul-branco-claro rounded-2" th:style="'background-image: url(/imagem/mostrarProduto/' + ${produto.id} + ')'"></div>
								<div th:if="${produto.imagem == null}" class="img-card bg-azul-branco-claro rounded-2" style="background-image: url('/img/sem-imagem.png')"></div>
								<div class="card-body">
									<h6 class="card-title" th:text="${produto.nome}">Carro chevrolet onix 2021</h6>
									<h5 class="card-title text-azul limite-texto" th:text="@{'R$ ' + ${#numbers.formatDecimal(produto.precoVista,3,'POINT',2,'COMMA')}}">R$ 1000</h5>
								</div>
							</div>
						</a>
					</div>
					<div th:if="${tamanho < 1}">
						<div th:replace="~{base :: nada-encontrado}"></div>
					</div>
				</div>
			</div>


		</section>
	</main>

	<footer th:replace="~{base :: footer}"></footer>

	<script src="https://getbootstrap.com/docs/5.1/dist/js/bootstrap.bundle.min.js"></script>
	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>